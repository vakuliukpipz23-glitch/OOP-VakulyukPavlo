# Кейси використання Polly (IndependentWork13)

## Сценарій 1: Зовнішній API + Retry
- Проблема: тимчасові помилки HTTP при виклику стороннього API.
- Політика: `Retry` з експоненційною затримкою (2, 4, 8 сек).
- Код: метод `Scenario1_ExternalApiWithRetry`, `CallExternalApi`.
- Очікувана поведінка: кілька ретраїв з логами; після відновлення сервісу запит успішний.

## Сценарій 2: База даних + Retry + Circuit Breaker
- Проблема: періодичні збої підключення до БД.
- Політика: комбінація `Retry` (2 повтори) + `CircuitBreaker` (3 помилки → пауза 5 сек).
- Код: метод `Scenario2_DatabaseWithRetryAndCircuitBreaker`, `FakeDatabaseQuery`.
- Очікувана поведінка: спочатку ретраї, потім відкритий breaker, логування станів Open/HalfOpen/Closed.

## Сценарій 3: Довготривала операція + Timeout + Fallback
- Проблема: довга/«зависаюча» операція генерації звіту.
- Політика: `Timeout` (2 сек, Pessimistic) + `Fallback` з безпечним результатом.
- Код: метод `Scenario3_LongRunningOperationWithTimeoutAndFallback`, `GenerateReport`.
- Очікувана поведінка: при перевищенні таймауту — лог Timeout, спрацьовує Fallback, повертається спрощене повідомлення.

## Висновки
Polly дозволяє:
- Описувати політики відмовостійкості у вигляді декларативних правил.
- Повторно використовувати їх у різних частинах коду.
- Легко додавати Retry, Circuit Breaker, Timeout, Fallback без дублювання логіки.
Це підвищує стабільність і керованість .NET-застосунків.
